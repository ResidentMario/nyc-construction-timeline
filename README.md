## README

### Contents

#### Primary Files

The analytic contents of this repository are broken up into three parts:

1. `Permit-to-Occupancy Processing.ipynb` &mdash; This Jupyter notebook contains the code which builds
`permit_occupancy_join_sample.csv`, the master file containing the permit data and corresponding first certificate of
 occupancy data for all buildings which received a new build construction permit in between May 24 2013 and December
  31 2014.
2. `Application-to-Permit Processing.ipynb` &mdash; This Jupyter notebook contains the code which builds
`application_permit_join_sample.csv`, the master file containing the permit data and corresponding job application
data for all buildings which recieved a new building construction permit in between January 1 2015 and June 24 2016.
3. `Application-Permit-Occupancy Analysis.ipynb` &mdash; This Jupyter notebook contains the actual analytics that I
ran on the two datasets generated by the above.

`crashed_2014_log.txt` is the logfile from a crashed `co_reader` process leg that was mined for the data lost (more
on that in `Application-Permit-Occupancy Analysis.ipynb`).

#### Auxiliary&mdash;`co_reader`

`co_reader` (specifically `co_reader.get_co_date()`) is an implementation of a Certificate of Occupancy data scraper
which reads C of O data off of the New York City Department of Building's [BISweb](http://a810-bisweb.nyc.gov/bisweb/).

This is a necessary part of the process for `Permit-to-Occupancy Processing.ipynb`. The code is very well-commented
so you can read it yourself.

`wait_page.html` and `wait_page.png` are code from and a screenshot of, respectively, the BISweb wait page (which
required significant engineering to implement). They're just here for context.

### Environment

You will need a `Python 2.7` environment booted up with the following libraries:

    pip install requests
    pip install bs4
    pip install selenium
    pip install arrow
    pip install tqdm
    pip install pdfminer
    conda install pandas
    conda install jupyter
    conda install seaborn

**You can install everything all at once using the packaged `environment.yml` by running `conda env create`**.

Notably, `pdfminer` (using the utility executable `pdf2txt.py`) is used to scrape text from the Certificate of
Occupacny PDFs using a command like the following one:

    pypdfocr marshalls_2012_record.pdf

It is `pdfminer` which imposes the restriction that this environment by `Python 2.7`. It is the only library
 in this stack which, as of mid-2016, is still Python 2 only.

To open the Jupyter notebooks, navigate to this repository on your computer and hit `jupyter notebook`.